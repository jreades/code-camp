{
  "hash": "84924899a9b8b72d0f1534ce5beba9c2",
  "result": {
    "engine": "jupyter",
    "markdown": "---\nformat: html\nfilters:\n- panelize\n- pyodide\ntitle: Introduction to Packages\n---\n\n\n\n\nIn this lesson we'll see how packages are useful in the context of tacking problems programmatically. The problem we will use here as an example is: _download a data file that we know is hosted on a web site and then do some analysis of those data_.  \n\nIn this example, we are going to access and analyse a data set that we created: [Cities from Wikipedia Data](https://raw.githubusercontent.com/kingsgeocomp/geocomputation/master/CitiesWithWikipediaData-simple.csv). Have a look at those data in your browser now by pasting the URL into a new tab. We'll use the `urlopen` package to help us access the data.\n\n## What's a Package?\n\nWe saw in a previous Code Camp Lesson how **functions** are a useful programming tool to enable us to re-use chunks of code. Basically, a function is a way to do something to something in a portable, easy-to-use little bundle of code. \n\nHowever, some steps in a program are done so many times by so many people that, eventually, someone writes a **package** that bundles up those operations into something easy to use that saves _you_ having to figure out the gory details. \n\n### Q: How is a package different from a function?\n\n**A**: A package is just a bundle of useful functions. \n\nThere's a little more to it than this, but simplest way to think of this is that when we type `import foo` then we are including functions from the `foo` package in our code. You'll see how this works below.\n\nThe point of the bundle-of-functions is that they can help us to achieve quite a lot very quickly since we don't need to reinvent the wheel and can just make use of someone else's code. In the same way that we won't mark you down for Googling the answer to a coding question, we won't mark you down for using someone else's package to help you get going with your programming. _**That's the whole point!**_\n\nOften, if you're not sure where to start Google (or StackOverflow) is the place to go:\n\n[`how to read text file on web server python`](https://www.google.co.uk/search?q=how+to+read+text+file+on+web+server+python&oq=how+to+read+text+file+on+web+server+python&aqs=chrome..69i57.629j0j7&sourceid=chrome&ie=UTF-8)\n\nBoom!\n\n### Q: But why have packages at all, why not just copy and paste all the functions that we need into our script directly? \n\n**A**: Because it keeps our code 'clean' and allows us to have functions with the *same name* that do different things. \n\nImagine the following:\n\n- You want to write a program to read data from two different web sites (_e.g._ [NOMIS](https://www.nomisweb.co.uk/default.asp) and the [London Data Store](https://data.london.gov.uk/)) \n- It turns out that both already have handy Python packages that help you to read the data if you give them the URL of the page to read\n- Even better, *both* packages have a simple function called `read_data(...)` that takes a URL and extracts the data that you want from that page as a CSV file, except...\n- Because the web sites are _completely_ different the `read_data(...)` functions are _specific_ to that one web site!\n\nSo, if both packages have functions callend `read_data()`, then after you have done:\n\n```python\nimport nomis_reader\nimport ldn_data_store_reader\n```\n\nHow does Python know which `read_data` you want to use? \n\nThe answer is the _namespace_: you can _only_ access the NOMIS `read_data` function by typing `nomis.read_data(...)` and you can _only_ access the Data Store `read_data` function by typing `ldn_data_store_reader.read_data(...)`. \n\n### Import... As...\n\nThe length and awkwardness of that last line is why you can write this:\n\n```python\nimport ldn_data_store_reader as ldn\n```\n\nBecause the _alias_ (`\"... as ldn\"`) lets you type `ldn.read_data(...)` and Python will know exactly which function you mean!\n\n## Packages in Context\n\nThe first step to writing a program is thinking about your goal and the steps required to achieve that. We _**don't**_ write programs like we write essays: all at once by writing a whole lot of code and then hoping for the best when we hit 'submit'.Â \n\nWhen you're tackling a programming problem you break it down into separate, simpler steps, and then tick them off one by one. Doing this gets easier as you become more familiar with programming, but it remains crucial and, in many cases, good programmers in large companies spend more time on _design_ than they do on actual _coding_.\n\nTo a computer, reading data from a remote location (e.g. a web site halfway around the world) is not really any different from reading one that's sitting on your your local hard drive (e.g. on your desktop). To simplify things a great deal: the computer really just needs to know the location of the file and an appropriate _protocol_ for accessing that file (_e.g._ http, https, ftp, local...) and then a clever programming language like Python will typically have packages that can kind of take of the rest. \n\nIn all cases -- local and remote -- you use the package to handle the hard bit of knowing how to actually 'read' data (because all files are just `1`s and `0`s of data) at the _device_ level and then Python gives you back a 'file handle' that helps you to achieve things like 'read a line' or 'close an open file'. You can think of a filehandle as something that gives you a 'grip' on a file-like object no matter where or what it is, and the package is the way that this magic is achieved.\n\nLet's take a common problem: \n\n> download a data file that we know is hosted on a web site and then do some analysis of those data...\n\nWe need to break this seemingly hard problem down into something simpler and can do this by thinking about it as three separate steps:\n\n1. First we want to read a remote file (e.g. a file somewhere the planet), \n2. Then we want to turn it into a local data structure (e.g. a list or a dictionary), \n3. Finally we want to perform some calculations on the data (e.g. calculate the mean).\n\nWe can tackle each of those problems in turn, getting the first bit working, then adding the second bit, etc. It's just like using lego to build something: you take the same pieces and assemble them in different ways to produce different things.\n\n### Step 1: Reading a Remote File\n\nSo, as I said, in Step \\#1 we are going to download a file hosted on a remote web site at [Cities from Wikipedia Data](https://raw.githubusercontent.com/kingsgeocomp/geocomputation/master/CitiesWithWikipediaData-simple.csv) (this can also be stored as a bit-link to make it easier to copy+paste and avoid _really_ long lines: http://bit.ly/2vrUFKi)\n\nWe aren't going to to try to turn it into data or otherwise make 'sense' of it yet, we just want to **get** it. We are then going to build from this first step towards more substantial exercises and, eventually, you could easily request Megabytes of data in real-time according to flexibly-specified parameters!\n\nBecause we're accessing data from a URL we will use the `urlopen` [function](https://docs.python.org/3.0/library/urllib.request.html?highlight=urlopen#urllib.request.urlopen) from the `urllib.request` [package](https://docs.python.org/3.0/library/urllib.request.html). \n\nIf you're wondering how we know to use this function and package, you might google something like: _read remote csv file python 3_ which in turn might get you to a StackOverflow question and anwer like [this](https://stackoverflow.com/questions/36965864/opening-a-url-with-urllib-in-python-3). \n\n#### Getting help with packages\n\nOf course, just knowing that you need `urlopen` doesn't necessarily help you to actually _use_ it. In addition to finding example code on StackOverflow, you can also ask the package itself for help with `dir` and `help`.\n\n##### dir\n\nThe 'Dive into Python' web site will tell you that \"dir returns a list of the attributes and methods of any object\". That introduces yet another term ('methods') that we don't want to get into right now, but _everything_ in Python is an object and so `dir` will give you help with packages, variables, functions... you name it.\n\n<style type=\"text/css\">\n.scrollable {\n    max-height: 400px;\n    overflow: visible;\n    overflow-y: scroll;\n    margin-bottom: 15px\n\n}\n</style>\n\n::: {.scrollable}\n\n::: {#a59ab8fa .cell execution_count=1}\n``` {.python .cell-code}\nimport math\ndir(math)\n```\n\n::: {.cell-output .cell-output-display execution_count=18}\n```\n['__doc__',\n '__file__',\n '__loader__',\n '__name__',\n '__package__',\n '__spec__',\n 'acos',\n 'acosh',\n 'asin',\n 'asinh',\n 'atan',\n 'atan2',\n 'atanh',\n 'cbrt',\n 'ceil',\n 'comb',\n 'copysign',\n 'cos',\n 'cosh',\n 'degrees',\n 'dist',\n 'e',\n 'erf',\n 'erfc',\n 'exp',\n 'exp2',\n 'expm1',\n 'fabs',\n 'factorial',\n 'floor',\n 'fmod',\n 'frexp',\n 'fsum',\n 'gamma',\n 'gcd',\n 'hypot',\n 'inf',\n 'isclose',\n 'isfinite',\n 'isinf',\n 'isnan',\n 'isqrt',\n 'lcm',\n 'ldexp',\n 'lgamma',\n 'log',\n 'log10',\n 'log1p',\n 'log2',\n 'modf',\n 'nan',\n 'nextafter',\n 'perm',\n 'pi',\n 'pow',\n 'prod',\n 'radians',\n 'remainder',\n 'sin',\n 'sinh',\n 'sqrt',\n 'tan',\n 'tanh',\n 'tau',\n 'trunc',\n 'ulp']\n```\n:::\n:::\n\n\n:::\n\nWhat **`dir`** gives you is information about things you can potentially do: it's like navigating the menu of a web site -- you aren't yet looking at the information you need, you're trying to figure out if the site even _has_ what you need. So `dir` on a package will give you a list of the functions (and any variables) that the person who created the package has provided.\n\nTypically, the information given by `dir` is highly abbreviated and is really just a prelude to using `help`.\n\n#### help\n\nThe `help` function gives you the actual detail you need about how to use a particular function: what are the inputs, what are the outputs, and what will the function actually _do_ ?\n\nBoth of these can be used on a package, a function, or a variable that you've created; for example: \n\n::: {#d504fedc .cell execution_count=2}\n``` {.python .cell-code}\nimport math\nhelp(math.acos)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nHelp on built-in function acos in module math:\n\nacos(x, /)\n    Return the arc cosine (measured in radians) of x.\n    \n    The result is between 0 and pi.\n\n```\n:::\n:::\n\n\nLet's see this in action!\n\n::: {#e3b344ed .cell execution_count=3}\n``` {.python .cell-code}\nfrom urllib.request import urlopen\nprint(\"dir(urlopen) returns:\\n\")\nprint(dir(urlopen))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ndir(urlopen) returns:\n\n['__annotations__', '__builtins__', '__call__', '__class__', '__closure__', '__code__', '__defaults__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__get__', '__getattribute__', '__getstate__', '__globals__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__kwdefaults__', '__le__', '__lt__', '__module__', '__name__', '__ne__', '__new__', '__qualname__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__']\n```\n:::\n:::\n\n\n::: {.scrollable}\n\n::: {#b6056531 .cell execution_count=4}\n``` {.python .cell-code}\nprint(\"help(urlopen) returns:\\n\")\nprint(help(urlopen)) # Notice!\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nhelp(urlopen) returns:\n\nHelp on function urlopen in module urllib.request:\n\nurlopen(url, data=None, timeout=<object object at 0x1047207d0>, *, cafile=None, capath=None, cadefault=False, context=None)\n    Open the URL url, which can be either a string or a Request object.\n    \n    *data* must be an object specifying additional data to be sent to\n    the server, or None if no such data is needed.  See Request for\n    details.\n    \n    urllib.request module uses HTTP/1.1 and includes a \"Connection:close\"\n    header in its HTTP requests.\n    \n    The optional *timeout* parameter specifies a timeout in seconds for\n    blocking operations like the connection attempt (if not specified, the\n    global default timeout setting will be used). This only works for HTTP,\n    HTTPS and FTP connections.\n    \n    If *context* is specified, it must be a ssl.SSLContext instance describing\n    the various SSL options. See HTTPSConnection for more details.\n    \n    The optional *cafile* and *capath* parameters specify a set of trusted CA\n    certificates for HTTPS requests. cafile should point to a single file\n    containing a bundle of CA certificates, whereas capath should point to a\n    directory of hashed certificate files. More information can be found in\n    ssl.SSLContext.load_verify_locations().\n    \n    The *cadefault* parameter is ignored.\n    \n    \n    This function always returns an object which can work as a\n    context manager and has the properties url, headers, and status.\n    See urllib.response.addinfourl for more detail on these properties.\n    \n    For HTTP and HTTPS URLs, this function returns a http.client.HTTPResponse\n    object slightly modified. In addition to the three new methods above, the\n    msg attribute contains the same information as the reason attribute ---\n    the reason phrase returned by the server --- instead of the response\n    headers as it is specified in the documentation for HTTPResponse.\n    \n    For FTP, file, and data URLs and requests explicitly handled by legacy\n    URLopener and FancyURLopener classes, this function returns a\n    urllib.response.addinfourl object.\n    \n    Note that None may be returned if no handler handles the request (though\n    the default installed global OpenerDirector uses UnknownHandler to ensure\n    this never happens).\n    \n    In addition, if proxy settings are detected (for example, when a *_proxy\n    environment variable like http_proxy is set), ProxyHandler is default\n    installed and makes sure the requests are handled through the proxy.\n\nNone\n```\n:::\n:::\n\n\n:::\n\n### A Challenge for you!\n\nFix the code to set the `url` variable, then use it with the `urlopen` function to open it.\n\n::: {.panel-tabset}\n\n#### Question\n\n```{pyodide-python}\nfrom urllib.request import urlopen\n\n# Given the info you were given above, what do you \n# think the value of 'url' should be? What\n# type of variable is it? int or string? \nurl = ???\n\n# Read the URL stream into variable called 'response'\n# using the function that we imported above\nresponse = ???(url)\n\n#now read from the stream, decoding so that we get actual text\ndatafile = response.read().decode('utf-8')\n\nprint(\"datafile variable is of type: '\" + datafile.__class__.__name__ + \"'.\\n\")\n```\n\n#### Answer\n\n::: {#c22f2f37 .cell execution_count=5}\n``` {.python .cell-code}\nfrom urllib.request import urlopen\n\nurl = \"https://raw.githubusercontent.com/kingsgeocomp/geocomputation/master/CitiesWithWikipediaData-simple.csv\"\nresponse = urlopen(url)\ndatafile = response.read().decode('utf-8')\n\nprint(\"datafile variable is of type: '\" + datafile.__class__.__name__ + \"'.\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ndatafile variable is of type: 'str'.\n\n```\n:::\n:::\n\n\n:::\n\nNote that the _datafile_ variable is of type `string` (because we decoded it as such).  If we hadn't decoded it, the result would have been of type `bytes` which wouldn't be as easy for us (humans) to work with. \n\nNow that we've read our data as text, we can print it to check. \n\n::: {#867d4a79 .cell execution_count=6}\n``` {.python .cell-code}\nprint(datafile)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nid,Name,Rank,Longitude,Latitude,Population\n1,Greater London,1,-18162.92767,6711153.709,9787426\n2,Greater Manchester,2,-251761.802,7073067.458,2553379\n3,West Midlands,3,-210635.2396,6878950.083,2440986\n4,West Yorkshire,4,-185959.3022,7145450.207,1777934\n5,Glasgow,5,-473845.2389,7538620.144,1209143\n6,Liverpool,6,-340595.1768,7063197.083,864122\n7,South Hampshire,7,-174443.8647,6589419.084,855569\n8,Tyneside,8,-187604.3647,7356018.207,774891\n9,Nottingham,9,-131672.2399,6979298.895,729977\n10,Sheffield,10,-163545.3257,7055177.403,685368\n```\n:::\n:::\n\n\nSo this is definitely text, but even though it has been nicely formatted _visually_ in the script, right now it's actually not in a very convenient format to work with in our _code_. The `datafile` `str` object is actually a single string of text that Python is interpreting as having line breaks. We can see this by printing the 'raw' object using the `repr` function:\n\n::: {#0374a393 .cell execution_count=7}\n``` {.python .cell-code}\nprint(repr(datafile))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'id,Name,Rank,Longitude,Latitude,Population\\n1,Greater London,1,-18162.92767,6711153.709,9787426\\n2,Greater Manchester,2,-251761.802,7073067.458,2553379\\n3,West Midlands,3,-210635.2396,6878950.083,2440986\\n4,West Yorkshire,4,-185959.3022,7145450.207,1777934\\n5,Glasgow,5,-473845.2389,7538620.144,1209143\\n6,Liverpool,6,-340595.1768,7063197.083,864122\\n7,South Hampshire,7,-174443.8647,6589419.084,855569\\n8,Tyneside,8,-187604.3647,7356018.207,774891\\n9,Nottingham,9,-131672.2399,6979298.895,729977\\n10,Sheffield,10,-163545.3257,7055177.403,685368'\n```\n:::\n:::\n\n\nNote the `\\n` character that Python is using to determine when to print a [new line](https://en.wikipedia.org/wiki/Newline) for us to read nicely.\n\nTo split the text into individual lines ourselves (ready to work with in our code), we can use the handily named `.splitlines()` method (more on methods below):\n\n::: {#1c65ecf9 .cell execution_count=8}\n``` {.python .cell-code}\nurl = \"https://raw.githubusercontent.com/kingsgeocomp/geocomputation/master/CitiesWithWikipediaData-simple.csv\"\n\nresponse = urlopen(url)\ndatafile = response.read().decode('utf-8').splitlines()\n\nprint(\"datafile variable is of type: '\" + datafile.__class__.__name__ + \"'.\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ndatafile variable is of type: 'list'.\n\n```\n:::\n:::\n\n\nNote now, that the data variable has type `list`. When we print this `datafile` `list` object (without `repr`) the `\\n` characters have gone and the list elements are split where those new line characters were previously (look carefully at where the `'` are): \n\n::: {#358b20dc .cell execution_count=9}\n``` {.python .cell-code}\nprint(datafile)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n['id,Name,Rank,Longitude,Latitude,Population', '1,Greater London,1,-18162.92767,6711153.709,9787426', '2,Greater Manchester,2,-251761.802,7073067.458,2553379', '3,West Midlands,3,-210635.2396,6878950.083,2440986', '4,West Yorkshire,4,-185959.3022,7145450.207,1777934', '5,Glasgow,5,-473845.2389,7538620.144,1209143', '6,Liverpool,6,-340595.1768,7063197.083,864122', '7,South Hampshire,7,-174443.8647,6589419.084,855569', '8,Tyneside,8,-187604.3647,7356018.207,774891', '9,Nottingham,9,-131672.2399,6979298.895,729977', '10,Sheffield,10,-163545.3257,7055177.403,685368']\n```\n:::\n:::\n\n\nWe can see this more clearly if we use a for loop to print out each element of the list (each element being a row of the original online file):\n\n::: {#e1af41b6 .cell execution_count=10}\n``` {.python .cell-code}\nfor row in datafile[-2:]:\n    print(row)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n9,Nottingham,9,-131672.2399,6979298.895,729977\n10,Sheffield,10,-163545.3257,7055177.403,685368\n```\n:::\n:::\n\n\nThe last row should be `10,Sheffield,10,-163545.3257,7055177.403,685368`.\n\nIf you've managed to get the code above to run and have received 11 rows of text in response to your `urlopen` query then, congratulations, you've now read a text file sitting on a server in, I think, Alberta, Canada and Python _didn't care_. \n\n### Step 2: Turning Text into Data\n\nWe now need to work on turning the response we got to our `urlopen` request into useful data. You'll notice that we are dealing with a _CSV_ (Comma-Separated Value) file and that the format is quite simple since none of the rows have fields that *themselves* contain commas. So to turn this into data we just need to _split_ the row into separate fields using the commas.\n\nIn the code below, `dir('string')` lists the available function for strings (because `'string'` is itself a _String_; we could just as easily written `dir('foo')` or `dir('supercalifragilisticexpialidocious')` because 'foo' and 'supercalifragilisticexpialidocious' are also strings and so have the _same_ functions available. \n\nIn the output below, the functions that start and end with `__` are generally considered private, so you can skip over these and focus on the ones further down that are designed to be useful to programmers. Can you spot the method that is most likely to be useful?\n\n#### A Brief Musical Interlude\n\nJust in case you need help pronouncing supercalifragilisticexpialidocious:\n\n\n\n\n{{< video https://youtu.be/uZNRzc3hWvE >}}\n\n\n\n\n\n\nRemember that you can find out what _methods_ are supported by a string using `dir(<string>)`:\n\n::: {.scrollable}\n\n::: {#e43d5ee5 .cell execution_count=11}\n``` {.python .cell-code}\ndir('supercalifragilisticexpialidocious')\n```\n\n::: {.cell-output .cell-output-display execution_count=28}\n```\n['__add__',\n '__class__',\n '__contains__',\n '__delattr__',\n '__dir__',\n '__doc__',\n '__eq__',\n '__format__',\n '__ge__',\n '__getattribute__',\n '__getitem__',\n '__getnewargs__',\n '__getstate__',\n '__gt__',\n '__hash__',\n '__init__',\n '__init_subclass__',\n '__iter__',\n '__le__',\n '__len__',\n '__lt__',\n '__mod__',\n '__mul__',\n '__ne__',\n '__new__',\n '__reduce__',\n '__reduce_ex__',\n '__repr__',\n '__rmod__',\n '__rmul__',\n '__setattr__',\n '__sizeof__',\n '__str__',\n '__subclasshook__',\n 'capitalize',\n 'casefold',\n 'center',\n 'count',\n 'encode',\n 'endswith',\n 'expandtabs',\n 'find',\n 'format',\n 'format_map',\n 'index',\n 'isalnum',\n 'isalpha',\n 'isascii',\n 'isdecimal',\n 'isdigit',\n 'isidentifier',\n 'islower',\n 'isnumeric',\n 'isprintable',\n 'isspace',\n 'istitle',\n 'isupper',\n 'join',\n 'ljust',\n 'lower',\n 'lstrip',\n 'maketrans',\n 'partition',\n 'removeprefix',\n 'removesuffix',\n 'replace',\n 'rfind',\n 'rindex',\n 'rjust',\n 'rpartition',\n 'rsplit',\n 'rstrip',\n 'split',\n 'splitlines',\n 'startswith',\n 'strip',\n 'swapcase',\n 'title',\n 'translate',\n 'upper',\n 'zfill']\n```\n:::\n:::\n\n\n:::\n\nI'm going to save you some time (_this_ time!) and tell you that we're interested in the `split` method. Why not use the `help` function to figure out how to make use of it?\n\n::: {#08684650 .cell execution_count=12}\n``` {.python .cell-code}\nhelp('supercalifragilisticexpialidocious'.split)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nHelp on built-in function split:\n\nsplit(sep=None, maxsplit=-1) method of builtins.str instance\n    Return a list of the substrings in the string, using sep as the separator string.\n    \n      sep\n        The separator used to split the string.\n    \n        When set to None (the default value), will split on any whitespace\n        character (including \\\\n \\\\r \\\\t \\\\f and spaces) and will discard\n        empty strings from the result.\n      maxsplit\n        Maximum number of splits (starting from the left).\n        -1 (the default value) means no limit.\n    \n    Note, str.split() is mainly useful for data that has been intentionally\n    delimited.  With natural text that includes punctuation, consider using\n    the regular expression module.\n\n```\n:::\n:::\n\n\nNow, using the output of the `help` command, how would you use `split` to turn that word into a list like this: `['sup','rcalifragilisticexpialidocious']`? If you replace the `???` with the right bits of code then running the block below will print out \"You got it!\". You *only* need to change the `???` and nothing else!\n\n::: {.panel-tabset}\n\n#### Question\n\n```{pyodide-python}\nif ['sup','rcalifragilisticexpialidocious']=='supercalifragilisticexpialidocious'.split(???, maxsplit=???):\n    print(\"You got it!\")\nelse:\n    print(\"Not yet!\")\n```\n\n#### Answer\n\n::: {#a41c05ed .cell execution_count=13}\n``` {.python .cell-code}\nif ['sup','rcalifragilisticexpialidocious']=='supercalifragilisticexpialidocious'.split('e', maxsplit=1):\n    print(\"You got it!\")\nelse:\n    print(\"Not yet!\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nYou got it!\n```\n:::\n:::\n\n\n:::\n\n::: {#bf26bfe2 .cell execution_count=14}\n``` {.python .cell-code}\n# Some other string methods\nprint('supercalifragilisticexpialidocious'.upper())\nprint('supercalifragilisticexpialidocious'.title())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSUPERCALIFRAGILISTICEXPIALIDOCIOUS\nSupercalifragilisticexpialidocious\n```\n:::\n:::\n\n\nOK, so you've tracked down the way to split a `string` using a delimiter and _even_ how to limit the number of 'words' that come out of the split operation. And you already saw another of these methods above (i.e. `splitlines`). We work a lot with `string`s, so it's handy to get to know the readily-available methods well.\n\nLet's test `string` splitting using our sample data (the last line of the 'simple' CSV file) to make sure it works the way we think it does... We want to turn the `string` below into a list like this:\n\n```python\n['10', 'Sheffield', '10', '-163545.3257', '7055177.403', '685368']\n```\nAgain, we only need to change the `???`.\n\n::: {.panel-tabset}\n\n#### Question\n\n```{pyodide-python}\ntest = datafile[-1].split(???)\nprint(test)\n```\n\n#### Answer\n\n::: {#ea31bfdd .cell execution_count=15}\n``` {.python .cell-code}\ntest = datafile[-1].split(',')\nprint(test)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n['10', 'Sheffield', '10', '-163545.3257', '7055177.403', '685368']\n```\n:::\n:::\n\n\n:::\n\n#### Consider\n\nA question: why do you think that I consider `a` to be data and not `b`? \n\n- a. `['10', 'Sheffield', '10', '-163545.3257', '7055177.403', '685368']`\n- b. `\"10,Sheffield,10,-163545.3257,7055177.403,685368\"`\n\nHopefully you can see that `a` is a `list` and `b` is a `str` (string). Because `a` is a list we can easily access each element. For example: \n\n::: {#a309f3ea .cell execution_count=16}\n``` {.python .cell-code}\ntest = datafile[-1].split(',')\nprint(\"The population of \" + test[1] + \" is \" + test[-1])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nThe population of Sheffield is 685368\n```\n:::\n:::\n\n\nIt is much more difficult to access the individual pieces of information from the string...  \n\nYou can hopefully see how we're breaking a complex problem down into a set of _increments_ , each of which is a bit easier to write and understand. \n\n### Step 3: Example Analysis\n\nNow that we understand why the list is a (basic) kind of data structure, we can *do* things with the list-of-lists:\n\n::: {#e6ba5732 .cell execution_count=17}\n``` {.python .cell-code}\ntotal = 0\ncount = 0\n\nfor idx,row in enumerate(datafile):\n    r = row.split(',')\n    if(idx > 0):\n        print(f\"Adding {r[-1]} to total, count is now {count}\")\n        total = total + int(r[-1])\n        count += 1\n\nmean = total / count \n\nprint(f\"The mean population of sampled UK cities is: {mean:,}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nAdding 9787426 to total, count is now 0\nAdding 2553379 to total, count is now 1\nAdding 2440986 to total, count is now 2\nAdding 1777934 to total, count is now 3\nAdding 1209143 to total, count is now 4\nAdding 864122 to total, count is now 5\nAdding 855569 to total, count is now 6\nAdding 774891 to total, count is now 7\nAdding 729977 to total, count is now 8\nAdding 685368 to total, count is now 9\nThe mean population of sampled UK cities is: 2,167,879.5\n```\n:::\n:::\n\n\n## Recap\n\nThis session about packages (just `urllib` in this case) also took in several other concepts: how to access Python's built-in help; how to use built-in functions (aka. methods); and how to piece together what we have covered to create a simple data processing script that reads a remote file of UK cities and calculates the mean population of those cities. There's *lots* more ground to cover, but we're nearly at the end of the foundational concepts and from there it will be about adding complexity and sophistication, not fundamentally new ideas.\n\n### Credits!\n\n#### Contributors:\n\nThe following individuals have contributed to these teaching materials: \n- [James Millington](https://github.com/jamesdamillington)\n- [Jon Reades](https://github.com/jreades)\n\n#### License\nThe content and structure of this teaching project itself is licensed under the [Creative Commons Attribution-NonCommercial-ShareAlike 4.0 license](https://creativecommons.org/licenses/by-nc-sa/4.0/), and the contributing source code is licensed under [The MIT License](https://opensource.org/licenses/mit-license.php).\n\n#### Acknowledgements:\nSupported by the [Royal Geographical Society](https://www.rgs.org/HomePage.htm) (with the Institute of British Geographers) with a Ray Y Gildea Jr Award.\n\n#### Potential Dependencies:\nThis lesson may depend on the following libraries: None\n\n",
    "supporting": [
      "Packages_files"
    ],
    "filters": [],
    "includes": {}
  }
}